# K8s Assistant é¡¹ç›®ç»“æ„è¯´æ˜

## ğŸ“ å®Œæ•´é¡¹ç›®ç›®å½•ç»“æ„

```
k8sassistant/
â”œâ”€â”€ README.md                    # é¡¹ç›®è¯´æ˜æ–‡æ¡£
â”œâ”€â”€ .env.example                 # ç¯å¢ƒå˜é‡é…ç½®ç¤ºä¾‹
â”œâ”€â”€ start.sh                     # é¡¹ç›®å¯åŠ¨è„šæœ¬
â”œâ”€â”€ start-cpu.sh                 # é¡¹ç›®å¯åŠ¨è„šæœ¬
â”œâ”€â”€ docker-compose.yml           # Docker Compose é…ç½®
â”œâ”€â”€ project-structure.md         # é¡¹ç›®ç»“æ„è¯´æ˜ï¼ˆæœ¬æ–‡ä»¶ï¼‰
â”‚
â”œâ”€â”€ backend/                     # FastAPI åç«¯åº”ç”¨
â”‚   â”œâ”€â”€ main.py                  # åº”ç”¨å…¥å£æ–‡ä»¶
â”‚   â”œâ”€â”€ requirements.txt         # Python ä¾èµ–
â”‚   â”œâ”€â”€ Dockerfile              # åç«¯ Docker é…ç½®
â”‚   â”‚
â”‚   â””â”€â”€ app/                    # åº”ç”¨æ ¸å¿ƒä»£ç 
â”‚       â”œâ”€â”€ __init__.py
â”‚       â”‚
â”‚       â”œâ”€â”€ core/               # æ ¸å¿ƒé…ç½®æ¨¡å—
â”‚       â”‚   â”œâ”€â”€ __init__.py
â”‚       â”‚   â”œâ”€â”€ config.py       # åº”ç”¨é…ç½®ç®¡ç†
â”‚       â”‚   â””â”€â”€ logging.py      # æ—¥å¿—é…ç½®
â”‚       â”‚
â”‚       â”œâ”€â”€ models/             # æ•°æ®æ¨¡å‹
â”‚       â”‚   â”œâ”€â”€ __init__.py
â”‚       â”‚   â””â”€â”€ chat.py         # èŠå¤©ç›¸å…³æ¨¡å‹
â”‚       â”‚
â”‚       â”œâ”€â”€ services/           # ä¸šåŠ¡æœåŠ¡å±‚
â”‚       â”‚   â”œâ”€â”€ __init__.py
â”‚       â”‚   â”œâ”€â”€ milvus_service.py    # Milvus å‘é‡æ•°æ®åº“æœåŠ¡
â”‚       â”‚   â”œâ”€â”€ embedding_service.py # æ–‡æœ¬åµŒå…¥æœåŠ¡
â”‚       â”‚   â””â”€â”€ llm_service.py       # LLM æœåŠ¡
â”‚       â”‚
â”‚       â”œâ”€â”€ api/                # API è·¯ç”±
â”‚       â”‚   â”œâ”€â”€ __init__.py
â”‚       â”‚   â””â”€â”€ v1/
â”‚       â”‚       â”œâ”€â”€ __init__.py
â”‚       â”‚       â”œâ”€â”€ api.py      # API è·¯ç”±ä¸»æ–‡ä»¶
â”‚       â”‚       â””â”€â”€ endpoints/  # API ç«¯ç‚¹
â”‚       â”‚           â”œâ”€â”€ __init__.py
â”‚       â”‚           â”œâ”€â”€ chat.py      # èŠå¤© API
â”‚       â”‚           â”œâ”€â”€ documents.py # æ–‡æ¡£ç®¡ç† API
â”‚       â”‚           â””â”€â”€ health.py    # å¥åº·æ£€æŸ¥ API
â”‚       â”‚
â”‚       â””â”€â”€ utils/              # å·¥å…·å‡½æ•°
â”‚           â””â”€â”€ __init__.py
â”‚
â”œâ”€â”€ frontend/                    # Vue 3 å‰ç«¯åº”ç”¨
â”‚   â”œâ”€â”€ package.json            # Node.js ä¾èµ–
â”‚   â”œâ”€â”€ vite.config.ts          # Vite é…ç½®
â”‚   â”œâ”€â”€ Dockerfile             # å‰ç«¯ Docker é…ç½®
â”‚   â”œâ”€â”€ nginx.conf             # Nginx é…ç½®
â”‚   â”‚
â”‚   â”œâ”€â”€ index.html             # HTML æ¨¡æ¿
â”‚   â”‚
â”‚   â””â”€â”€ src/                   # æºä»£ç 
â”‚       â”œâ”€â”€ main.ts            # åº”ç”¨å…¥å£
â”‚       â”œâ”€â”€ App.vue            # æ ¹ç»„ä»¶
â”‚       â”‚
â”‚       â”œâ”€â”€ router/            # è·¯ç”±é…ç½®
â”‚       â”‚   â””â”€â”€ index.ts
â”‚       â”‚
â”‚       â”œâ”€â”€ stores/            # Pinia çŠ¶æ€ç®¡ç†
â”‚       â”‚   â””â”€â”€ chat.ts        # èŠå¤©çŠ¶æ€ç®¡ç†
â”‚       â”‚
â”‚       â”œâ”€â”€ api/               # API æ¥å£
â”‚       â”‚   â””â”€â”€ chat.ts        # èŠå¤© API æ¥å£
â”‚       â”‚
â”‚       â”œâ”€â”€ types/             # TypeScript ç±»å‹å®šä¹‰
â”‚       â”‚   â””â”€â”€ chat.ts        # èŠå¤©ç›¸å…³ç±»å‹
â”‚       â”‚
â”‚       â”œâ”€â”€ components/        # Vue ç»„ä»¶
â”‚       â”‚   â””â”€â”€ (å¾…æ·»åŠ )
â”‚       â”‚
â”‚       â””â”€â”€ views/             # é¡µé¢è§†å›¾
â”‚           â”œâ”€â”€ ChatView.vue       # èŠå¤©ä¸»é¡µé¢
â”‚           â”œâ”€â”€ DocumentsView.vue  # æ–‡æ¡£ç®¡ç†é¡µé¢
â”‚           â”œâ”€â”€ SettingsView.vue   # è®¾ç½®é¡µé¢
â”‚           â””â”€â”€ NotFoundView.vue   # 404 é¡µé¢
â”‚
â”œâ”€â”€ data_processing/            # æ•°æ®å¤„ç†æ¨¡å—
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚
â”‚   â”œâ”€â”€ crawlers/              # æ–‡æ¡£çˆ¬å–
â”‚   â”‚   â””â”€â”€ k8s_crawler.py     # Kubernetes æ–‡æ¡£çˆ¬å–å™¨
â”‚   â”‚
â”‚   â”œâ”€â”€ processors/            # æ–‡æœ¬å¤„ç†
â”‚   â”‚   â””â”€â”€ document_processor.py # æ–‡æ¡£å¤„ç†å™¨
â”‚   â”‚
â”‚   â””â”€â”€ loaders/               # æ•°æ®åŠ è½½
â”‚       â””â”€â”€ (å¾…æ·»åŠ )
â”‚
â”œâ”€â”€ docs/                      # é¡¹ç›®æ–‡æ¡£
â”‚   â””â”€â”€ (å¾…æ·»åŠ )
â”‚
â”œâ”€â”€ data/                      # æ•°æ®ç›®å½•
â”‚   â”œâ”€â”€ docs/                  # çˆ¬å–çš„æ–‡æ¡£
â”‚   â””â”€â”€ processed/             # å¤„ç†åçš„æ•°æ®
â”‚
â””â”€â”€ logs/                      # æ—¥å¿—ç›®å½•
    â”œâ”€â”€ app.log               # åº”ç”¨æ—¥å¿—
    â””â”€â”€ error.log             # é”™è¯¯æ—¥å¿—
```

## ğŸ—ï¸ æ¶æ„è®¾è®¡

### åç«¯æ¶æ„ (FastAPI)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   FastAPI App   â”‚    â”‚   API Routes    â”‚    â”‚   Services      â”‚
â”‚                 â”‚    â”‚                 â”‚    â”‚                 â”‚
â”‚  - Main Entry   â”‚â”€â”€â”€â–¶â”‚  - Chat API     â”‚â”€â”€â”€â–¶â”‚  - LLM Service  â”‚
â”‚  - Middleware   â”‚    â”‚  - Documents    â”‚    â”‚  - Embedding    â”‚
â”‚  - CORS         â”‚    â”‚  - Health       â”‚    â”‚  - Milvus       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚                       â”‚
                                â–¼                       â–¼
                       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                       â”‚   Models        â”‚    â”‚   External      â”‚
                       â”‚                 â”‚    â”‚   Services      â”‚
                       â”‚  - ChatRequest  â”‚    â”‚  - Milvus DB    â”‚
                       â”‚  - ChatResponse â”‚    â”‚  - LLM API      â”‚
                       â”‚  - Conversation â”‚    â”‚  - Embedding    â”‚
                       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### å‰ç«¯æ¶æ„ (Vue 3)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Vue App       â”‚    â”‚   Router        â”‚    â”‚   Views         â”‚
â”‚                 â”‚    â”‚                 â”‚    â”‚                 â”‚
â”‚  - Main Entry   â”‚â”€â”€â”€â–¶â”‚  - Chat Route   â”‚â”€â”€â”€â–¶â”‚  - ChatView     â”‚
â”‚  - Plugins      â”‚    â”‚  - Documents    â”‚    â”‚  - DocumentsViewâ”‚
â”‚  - Components   â”‚    â”‚  - Settings     â”‚    â”‚  - SettingsView â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                       â”‚                       â”‚
        â–¼                       â–¼                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Stores        â”‚    â”‚   API Layer     â”‚    â”‚   Components    â”‚
â”‚                 â”‚    â”‚                 â”‚    â”‚                 â”‚
â”‚  - Chat Store   â”‚â”€â”€â”€â–¶â”‚  - Chat API     â”‚â”€â”€â”€â–¶â”‚  - MessageList  â”‚
â”‚  - User Store   â”‚    â”‚  - Documents    â”‚    â”‚  - InputForm    â”‚
â”‚  - Settings     â”‚    â”‚  - Health       â”‚    â”‚  - Sidebar      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”„ æ•°æ®æµç¨‹

### RAG æµç¨‹

```
1. ç”¨æˆ·æé—®
   â†“
2. æ–‡æœ¬åµŒå…¥ (Embedding Service)
   â†“
3. å‘é‡æ£€ç´¢ (Milvus Service)
   â†“
4. ä¸Šä¸‹æ–‡æ„å»º (LLM Service)
   â†“
5. ç”Ÿæˆå›å¤ (LLM API)
   â†“
6. è¿”å›ç»“æœ
```

### æ–‡æ¡£å¤„ç†æµç¨‹

```
1. æ–‡æ¡£çˆ¬å– (K8s Crawler)
   â†“
2. æ–‡æœ¬åˆ†å‰² (Document Processor)
   â†“
3. å‘é‡åŒ– (Embedding Service)
   â†“
4. å­˜å‚¨åˆ°å‘é‡æ•°æ®åº“ (Milvus)
```

## ğŸ› ï¸ æŠ€æœ¯æ ˆè¯¦è§£

### åç«¯æŠ€æœ¯æ ˆ
- **FastAPI**: ç°ä»£ã€å¿«é€Ÿçš„ Web æ¡†æ¶
- **Pydantic**: æ•°æ®éªŒè¯å’Œåºåˆ—åŒ–
- **Uvicorn**: ASGI æœåŠ¡å™¨
- **Milvus**: å‘é‡æ•°æ®åº“
- **Sentence Transformers**: æ–‡æœ¬åµŒå…¥æ¨¡å‹
- **OpenAI/Deepseek**: LLM API
- **Loguru**: æ—¥å¿—ç®¡ç†

### å‰ç«¯æŠ€æœ¯æ ˆ
- **Vue 3**: æ¸è¿›å¼ JavaScript æ¡†æ¶
- **TypeScript**: ç±»å‹å®‰å…¨çš„ JavaScript
- **Vite**: å¿«é€Ÿæ„å»ºå·¥å…·
- **Element Plus**: Vue 3 UI ç»„ä»¶åº“
- **Pinia**: çŠ¶æ€ç®¡ç†
- **Vue Router**: è·¯ç”±ç®¡ç†
- **Axios**: HTTP å®¢æˆ·ç«¯

### éƒ¨ç½²æŠ€æœ¯æ ˆ
- **Docker**: å®¹å™¨åŒ–
- **Docker Compose**: å¤šå®¹å™¨ç¼–æ’
- **Nginx**: åå‘ä»£ç†å’Œé™æ€æ–‡ä»¶æœåŠ¡

## ğŸ“‹ æ ¸å¿ƒåŠŸèƒ½æ¨¡å—

### 1. èŠå¤©æ¨¡å—
- å®æ—¶å¯¹è¯
- æµå¼å“åº”
- å¯¹è¯å†å²
- ä¸Šä¸‹æ–‡ç®¡ç†

### 2. æ–‡æ¡£ç®¡ç†æ¨¡å—(æœªå®ç°)
- æ–‡æ¡£ä¸Šä¼ 
- å‘é‡åŒ–å­˜å‚¨
- ç›¸ä¼¼åº¦æœç´¢
- æ–‡æ¡£ç»Ÿè®¡

### 3. æ•°æ®å¤„ç†æ¨¡å—
- æ–‡æ¡£çˆ¬å–
- æ–‡æœ¬åˆ†å‰²
- å‘é‡åŒ–å¤„ç†
- æ‰¹é‡å¯¼å…¥

### 4. ç³»ç»Ÿç›‘æ§æ¨¡å—
- å¥åº·æ£€æŸ¥
- æœåŠ¡çŠ¶æ€
- æ€§èƒ½ç›‘æ§
- é”™è¯¯æ—¥å¿—

## ğŸ”§ é…ç½®è¯´æ˜

### ç¯å¢ƒå˜é‡
- `MILVUS_URI`: Milvus æ•°æ®åº“åœ°å€
- `LLM_API_KEY`: LLM API å¯†é’¥
- `LLM_BASE_URL`: LLM API åŸºç¡€åœ°å€
- `EMBEDDING_MODEL`: åµŒå…¥æ¨¡å‹åç§°
- `COLLECTION_NAME`: å‘é‡é›†åˆåç§°

### ç«¯å£é…ç½®
- å‰ç«¯: 3000
- åç«¯: 8000
- Milvus: 19530
- Nginx: 80/443

## ğŸš€ éƒ¨ç½²æ–¹å¼

### å¼€å‘ç¯å¢ƒ
```bash
# å¯åŠ¨åç«¯
cd backend
pip install -r requirements.txt
uvicorn main:app --reload

# å¯åŠ¨å‰ç«¯
cd frontend
npm install
npm run dev
```

### ç”Ÿäº§ç¯å¢ƒ
```bash
# ä½¿ç”¨ Docker Compose
./start.sh

# æˆ–æ‰‹åŠ¨å¯åŠ¨
docker-compose up -d
```

## ğŸ“ å¼€å‘æŒ‡å—

### æ·»åŠ æ–°åŠŸèƒ½
1. åœ¨åç«¯ `app/api/v1/endpoints/` æ·»åŠ æ–°çš„ API ç«¯ç‚¹
2. åœ¨å‰ç«¯ `src/api/` æ·»åŠ å¯¹åº”çš„ API æ¥å£
3. åœ¨å‰ç«¯ `src/views/` æ·»åŠ æ–°çš„é¡µé¢ç»„ä»¶
4. æ›´æ–°è·¯ç”±é…ç½®

### ä»£ç è§„èŒƒ
- ä½¿ç”¨ TypeScript è¿›è¡Œç±»å‹æ£€æŸ¥
- éµå¾ª PEP 8 Python ä»£ç è§„èŒƒ
- ä½¿ç”¨ ESLint è¿›è¡Œä»£ç æ£€æŸ¥
- æ·»åŠ é€‚å½“çš„æ³¨é‡Šå’Œæ–‡æ¡£

### æµ‹è¯•
- åç«¯: ä½¿ç”¨ pytest è¿›è¡Œå•å…ƒæµ‹è¯•
- å‰ç«¯: ä½¿ç”¨ Vitest è¿›è¡Œç»„ä»¶æµ‹è¯•
- API: ä½¿ç”¨ FastAPI è‡ªåŠ¨ç”Ÿæˆçš„æµ‹è¯•æ–‡æ¡£
